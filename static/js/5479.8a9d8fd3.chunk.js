"use strict";(self.webpackChunkn2_depot=self.webpackChunkn2_depot||[]).push([[5479],{15479:(e,t,r)=>{r.r(t),r.d(t,{registerFunctions:()=>C});var n=r(42265),o=(r(59486),r(72741)),i=r(62357),a=r(22564),s=r(44715),l=r(93249),u=r(32238),p=r(79803),c=r(81753),d=r(7575),f=r(98995),h=r(45362),y=r(14725),m=r(5924),v=r(2736),g=r(11933),w=r(49074),S=r(81943),b=r(78952);let Z=null;async function _(e,t){const n=new f.default({portal:e,id:t});return await n.load(),null===Z&&(Z=await r.e(9513).then(r.bind(r,29513))),await Z.fetchKnowledgeGraph(n.url)}function j(e,t,r,n,o){if(null===e)return null;if((0,s.c)(e)||(0,s.b)(e))return e;if((0,s.k)(e))return e.toJSDate();if((0,s.k)(e))return e.toJSDate();if((0,s.m)(e))return e.toStorageFormat();if((0,s.n)(e))return e.toStorageString();if((0,s.v)(e)){const i={};for(const a of e.keys())i[a]=j(e.field(a),t,r,n,o),i[a]instanceof u.Z&&o.push({container:i,indexer:a});return i}if((0,s.o)(e)){const i=e.map((e=>j(e,t,r,n,o)));for(let e=0;e<i.length;e++)i[e]instanceof u.Z&&o.push({container:i,indexer:e});return i}return(0,s.p)(e)?e.spatialReference.isWGS84?e:e.spatialReference.isWebMercator&&t?(0,c.Sx)(e):e:void 0}function G(e,t){if(!e)return null;const r={};for(const n in e)r[n]=R(e[n],t);return r}function R(e,t){var r,n;return null===e?null:(0,s.o)(e)?e.map((e=>R(e,t))):e instanceof y.Z?{graphTypeName:e.typeName,id:e.id,graphType:"entity",properties:G(e.properties,t)}:e instanceof v.Z?{graphType:"object",properties:G(e.properties,t)}:e instanceof w.Z?{graphTypeName:e.typeName,id:e.id,graphType:"relationship",originId:null!==(r=e.originId)&&void 0!==r?r:null,destinationId:null!==(n=e.destinationId)&&void 0!==n?n:null,properties:G(e.properties,t)}:e instanceof g.Z?{graphType:"path",path:e.path?e.path.map((e=>R(e,t))):null}:(0,s.p)(e)?function(e,t){if(!e)return e;if(e.spatialReference.isWGS84&&t.spatialReference.isWebMercator)return(0,c.$)(e);if(e.spatialReference.equals(t.spatialReference))return e;throw new a.aV(t,a.rH.WrongSpatialReference,null)}(e,t):(0,s.c)(e)||(0,s.b)(e)||(0,s.a6)(e)?e:null}function C(e){"async"===e.mode&&(e.functions.knowledgegraphbyportalitem=function(t,r){return e.standardFunctionAsync(t,r,((e,n,i)=>{var u,p;if((0,s.G)(i,2,2,t,r),null===i[0])throw new a.aV(t,a.rH.PortalRequired,r);if(i[0]instanceof o.Z){var c;const e=(0,s.j)(i[1]);let r;return r=null!==(c=t.services)&&void 0!==c&&c.portal?t.services.portal:d.Z.getDefault(),_((0,l._)(i[0],r),e)}if(!1===(0,s.c)(i[0]))throw new a.aV(t,a.rH.InvalidParameter,r);const f=(0,s.j)(i[0]);return _(null!==(u=null===(p=t.services)||void 0===p?void 0:p.portal)&&void 0!==u?u:d.Z.getDefault(),f)}))},e.signatures.push({name:"knowledgegraphbyportalitem",min:2,max:2}),e.functions.querygraph=function(t,o){return e.standardFunctionAsync(t,o,(async(e,l,u)=>{var c,d;(0,s.G)(u,2,4,t,o);const f=u[0];if(!(0,s.w)(f))throw new a.aV(t,a.rH.InvalidParameter,o);const y=u[1];if(!(0,s.c)(y))throw new a.aV(t,a.rH.InvalidParameter,o);null===Z&&(Z=await r.e(9513).then(r.bind(r,29513)));let v=null;const g=(0,s.K)(u[2],null);if(!(g instanceof i.Z||null===g))throw new a.aV(t,a.rH.InvalidParameter,o);if(g){let e=[];v=j(g,!0,!1,t,e),e=e.filter((e=>!e.container[e.indexer].spatialReference.isWGS84)),e.length>0&&await async function(e){var t;const r=null!==(t=n.default.geometryServiceUrl)&&void 0!==t?t:"";if(!r){(0,p.isLoaded)()||await(0,p.load)();for(const t of e)t.container[t.indexer]=(0,p.project)(t.container[t.indexer],b.Z.WGS84);return}const o=e.map((e=>e.container[e.indexer])),i=new S.Z({geometries:o,outSpatialReference:b.Z.WGS84}),a=await(0,h.i)(r,i);for(let n=0;n<a.length;n++){const t=e[n];t.container[t.indexer]=a[n]}}(e)}const w=new m.Z({openCypherQuery:y,bindParameters:v});(null!==(c=null===f||void 0===f||null===(d=f.serviceDefinition)||void 0===d?void 0:d.currentVersion)&&void 0!==c?c:11.3)>11.2&&(w.outputSpatialReference=t.spatialReference);const _=(await Z.executeQueryStreaming(f,w)).resultRowsStream.getReader(),G=[];try{for(;;){const{done:e,value:r}=await _.read();if(e)break;if((0,s.o)(r))for(const n of r)G.push(R(n,t));else{const e=[];for(const n of r)e.push(R(r[n],t));G.push(e)}}}catch(C){throw C}return i.Z.convertJsonToArcade(G,(0,s.N)(t),!1,!0)}))},e.signatures.push({name:"querygraph",min:2,max:4}))}},93249:(e,t,r)=>{r.d(t,{_:()=>o});var n=r(7575);function o(e,t){return null===e?t:new n.Z({url:e.field("url")})}},45362:(e,t,r)=>{r.d(t,{i:()=>p});var n=r(76200),o=r(25243),i=r(77981),a=r(23084),s=r(35594),l=r(81943);const u=(0,o.se)(l.Z);async function p(e,t,r){t=u(t);const o=(0,a.en)(e),l={...o.query,f:"json",...t.toJSON()},p=t.outSpatialReference,c=(0,i.Ji)(t.geometries[0]),d=(0,a.lA)(l,r);return(0,n.Z)(o.path+"/project",d).then((e=>{let{data:{geometries:t}}=e;return(0,s.o)(t,c,p)}))}},35594:(e,t,r)=>{r.d(t,{F:()=>o,o:()=>i});var n=r(77981);function o(e){return{geometryType:(0,n.Ji)(e[0]),geometries:e.map((e=>e.toJSON()))}}function i(e,t,r){const o=(0,n.q9)(t);return e.map((e=>{const t=o.fromJSON(e);return t.spatialReference=r,t}))}},14725:(e,t,r)=>{r.d(t,{Z:()=>u});var n=r(27366),o=(r(59486),r(49861)),i=(r(93169),r(32718),r(84936),r(69912)),a=r(25695),s=r(848);let l=class extends a.Z{constructor(e){super(e),this.layoutGeometry=null}};(0,n._)([(0,o.Cb)({type:s.Z,json:{write:!0}})],l.prototype,"layoutGeometry",void 0),l=(0,n._)([(0,i.j)("esri.rest.knowledgeGraph.Entity")],l);const u=l},25695:(e,t,r)=>{r.d(t,{Z:()=>l});var n=r(27366),o=r(49861),i=(r(93169),r(32718),r(84936),r(69912)),a=r(92364);let s=class extends a.Z{constructor(e){super(e),this.typeName=null,this.id=null}};(0,n._)([(0,o.Cb)({type:String,json:{write:!0}})],s.prototype,"typeName",void 0),(0,n._)([(0,o.Cb)({type:String,json:{write:!0}})],s.prototype,"id",void 0),s=(0,n._)([(0,i.j)("esri.rest.knowledgeGraph.GraphNamedObject")],s);const l=s},92364:(e,t,r)=>{r.d(t,{Z:()=>l});var n=r(27366),o=r(46784),i=r(49861),a=(r(93169),r(32718),r(84936),r(69912));let s=class extends o.wq{constructor(e){super(e),this.properties=null}};(0,n._)([(0,i.Cb)({json:{write:!0}})],s.prototype,"properties",void 0),s=(0,n._)([(0,a.j)("esri.rest.knowledgeGraph.GraphObject")],s);const l=s},5924:(e,t,r)=>{r.d(t,{Z:()=>p});var n=r(27366),o=r(49861),i=(r(93169),r(32718),r(84936),r(69912)),a=r(7138);let s=class extends a.Z{constructor(e){super(e),this.openCypherQuery=""}};(0,n._)([(0,o.Cb)()],s.prototype,"openCypherQuery",void 0),s=(0,n._)([(0,i.j)("esri.rest.knowledgeGraph.GraphQuery")],s);const l=s;let u=class extends l{constructor(e){super(e),this.bindParameters=null,this.bindGeometryQuantizationParameters=null,this.outputQuantizationParameters=null,this.outputSpatialReference=null,this.provenanceBehavior=null}};(0,n._)([(0,o.Cb)()],u.prototype,"bindParameters",void 0),(0,n._)([(0,o.Cb)()],u.prototype,"bindGeometryQuantizationParameters",void 0),(0,n._)([(0,o.Cb)()],u.prototype,"outputQuantizationParameters",void 0),(0,n._)([(0,o.Cb)()],u.prototype,"outputSpatialReference",void 0),(0,n._)([(0,o.Cb)()],u.prototype,"provenanceBehavior",void 0),u=(0,n._)([(0,i.j)("esri.rest.knowledgeGraph.GraphQueryStreaming")],u);const p=u},2736:(e,t,r)=>{r.d(t,{Z:()=>s});var n=r(27366),o=(r(32718),r(93169),r(84936),r(10064),r(69912)),i=r(92364);let a=class extends i.Z{constructor(e){super(e)}};a=(0,n._)([(0,o.j)("esri.rest.knowledgeGraph.ObjectValue")],a);const s=a},11933:(e,t,r)=>{r.d(t,{Z:()=>u});var n=r(27366),o=r(46784),i=r(49861),a=(r(93169),r(32718),r(84936),r(69912)),s=r(92364);let l=class extends o.wq{constructor(e){super(e),this.path=null}};(0,n._)([(0,i.Cb)({type:[s.Z],json:{write:!0}})],l.prototype,"path",void 0),l=(0,n._)([(0,a.j)("esri.rest.knowledgeGraph.Path")],l);const u=l},49074:(e,t,r)=>{r.d(t,{Z:()=>u});var n=r(27366),o=(r(59486),r(49861)),i=(r(93169),r(32718),r(84936),r(69912)),a=r(25695),s=r(29909);let l=class extends a.Z{constructor(e){super(e),this.originId=null,this.destinationId=null,this.layoutGeometry=null}};(0,n._)([(0,o.Cb)({type:String,json:{write:!0}})],l.prototype,"originId",void 0),(0,n._)([(0,o.Cb)({type:String,json:{write:!0}})],l.prototype,"destinationId",void 0),(0,n._)([(0,o.Cb)({type:s.Z,json:{write:!0}})],l.prototype,"layoutGeometry",void 0),l=(0,n._)([(0,i.j)("esri.rest.knowledgeGraph.Relationship")],l);const u=l},81943:(e,t,r)=>{r.d(t,{Z:()=>p});var n=r(27366),o=r(46784),i=r(49861),a=(r(93169),r(32718),r(84936),r(69912)),s=r(77981),l=r(92975);let u=class extends o.wq{constructor(e){super(e),this.geometries=[],this.outSpatialReference=null,this.transformation=null,this.transformForward=null}toJSON(){const e=this.geometries.map((e=>e.toJSON())),t=this.geometries[0],r={};return r.outSR=(0,l.B9)(this.outSpatialReference),r.inSR=(0,l.B9)(t.spatialReference),r.geometries=JSON.stringify({geometryType:(0,s.Ji)(t),geometries:e}),this.transformation&&(r.transformation=this.transformation.wkid||JSON.stringify(this.transformation)),null!=this.transformForward&&(r.transformForward=this.transformForward),r}};(0,n._)([(0,i.Cb)()],u.prototype,"geometries",void 0),(0,n._)([(0,i.Cb)({json:{read:{source:"outSR"}}})],u.prototype,"outSpatialReference",void 0),(0,n._)([(0,i.Cb)()],u.prototype,"transformation",void 0),(0,n._)([(0,i.Cb)()],u.prototype,"transformForward",void 0),u=(0,n._)([(0,a.j)("esri.rest.support.ProjectParameters")],u);const p=u},23084:(e,t,r)=>{r.d(t,{cv:()=>s,en:()=>a,lA:()=>i});r(42265),r(19545);var n=r(84652),o=r(35995);r(66660);function i(e,t){return t?{...t,query:{...null!==e&&void 0!==e?e:{},...t.query}}:{query:e}}function a(e){return"string"==typeof e?(0,o.mN)(e):(0,n.d9)(e)}function s(e,t,r){const n={};for(const o in e){if("declaredClass"===o)continue;const i=e[o];if(null!=i&&"function"!=typeof i)if(Array.isArray(i))n[o]=i.map((e=>s(e)));else if("object"==typeof i)if(i.toJSON){const e=i.toJSON(null===r||void 0===r?void 0:r[o]);n[o]=t?e:JSON.stringify(e)}else n[o]=t?i:JSON.stringify(i);else n[o]=i}return n}}}]);
//# sourceMappingURL=5479.8a9d8fd3.chunk.js.map